package {	import flash.display.MovieClip;	import flash.events.Event;	public class Car2 extends MovieClip	{		var refM:MovieClip;		var moveSpeedMax:Number = 2000;		var rotateSpeedMax:Number = 15;		var decay:Number = .98;		var _dx:Number = 0;		var _dy:Number = 0;		var _vx:Number = 0;		var _vy:Number = 0;		var trueRotation:Number = 0;		var car2Count:Number = 0;		var isTrue2:Boolean = true;		var startMove:Boolean = false;		var carRandomPos:Number = 0;		var isActive2:Boolean = false;		public function Car2()		{			stage.addEventListener(Event.ENTER_FRAME,gLoop);			refM = MovieClip(this.parent);			refM.carsArray.push(this);		}		function gLoop(event:Event):void		{			refM.car2Text.text = "Car2 " + car2Count;			for (var a:Number = 0; a < refM.carsArray.length; a += 1)			{				if (refM.carsArray[3].hitTestObject(refM.carsArray[0]) || refM.carsArray[3].hitTestObject(refM.carsArray[1]) || refM.carsArray[3].hitTestObject(refM.carsArray[2]) || refM.carsArray[3].hitTestObject(refM.carsArray[4]))				{					refM.carsArray[3].alpha = .5;					//isActive2 = false;					//isTrue2 = true;					//startMove = false;				}			}			if (isActive2 == false)			{				if (isTrue2 == true)				{					carRandomPos = Math.random() * 1;					carRandomPos = Math.round(carRandomPos);					isTrue2 = false;				}				if (startMove == false)				{					if (carRandomPos == 0)					{						this.x = 200;						this.y = 650;						this.rotation = 90;					}					if (carRandomPos == 1)					{						this.x = 500;						this.y = 650;						this.rotation = 90;					}					car2Count += 1					;					if (car2Count > 100)					{						car2Count = 0;						startMove = true;					}				}				if (startMove == true)				{					isActive2 = true;				}			}			if (isActive2 == true)			{				_dx = this.x - refM.destinationX;				_dy = this.y - refM.destinationY;				var rotateTo:Number = getDegrees(getRadians(_dx,_dy));				if ((rotateTo > this.rotation + 180))				{					rotateTo -=  360;				}				if ((rotateTo < this.rotation - 180))				{					rotateTo +=  360;				}				trueRotation = (rotateTo - this.rotation) / rotateSpeedMax;				this.rotation +=  trueRotation;				_vx +=  (refM.destinationX - this.x) / moveSpeedMax;				_vy +=  (refM.destinationY - this.y) / moveSpeedMax;				_vx *=  decay;				_vy *=  decay;				if ((getDistance(_dx,_dy) < 50))				{					trueRotation *=  .5;				}				this.x +=  _vx;				this.y +=  _vy;				function getDistance(delta_x:Number, delta_y:Number):Number				{					return Math.sqrt((delta_x*delta_x)+(delta_y*delta_y));				}				function getRadians(delta_x:Number, delta_y:Number):Number				{					var r:Number = Math.atan2(delta_y,delta_x);					if (delta_y < 0)					{						r +=  (2 * Math.PI);					}					return r;				}				function getDegrees(radians:Number):Number				{					return Math.floor(radians/(Math.PI/180));				}				if (this.y < -80)				{					this.y = 680;				}				if (this.y > 680)				{					this.y = -80;				}				if (this.x > 880)				{					this.x = -80;				}				if (this.x < -80)				{					this.x = 880;				}			}		}	}}